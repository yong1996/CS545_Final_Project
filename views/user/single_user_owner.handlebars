<section class="my-5">
    <div class="container">    
        <div class="row">
            <div class="col-3">
                <div class="avatar-container">
                    <img src="{{#if user.avatar}}{{user.avatar}}{{else}}/public/img/avatar/default-user.png{{/if}}" id="user-avatar" class="img-fluid avatar" alt="user avatar" width="300">                
                </div>
            </div>
            <div class="col-9">
                <h1>Username: {{user.username}}</h1>
                <h2>Zip: {{user.zip}}</h2>
                <div>
                    <button class="btn btn-secondary my-3" data-toggle="modal" data-target="#update-avatar-modal">Change avatar</button>
                    <button class="btn btn-secondary my-3" data-toggle="modal" data-target="#change-password-modal">Change password</button>
                    <button class="btn btn-secondary my-3" data-toggle="modal" data-target="#change-zip-modal">Change zipCode</button>
                </div>
                <div>
                    <button class="btn btn-primary my-3" data-toggle="modal" data-target="#add-question-modal">Add question</button>
                </div>
            </div>  
        </div> 
    </div>
</section>

{{!-- upload avatar --}}
<div class="modal fade" id="update-avatar-modal" tabindex="-1" role="dialog" aria-labelledby="modal-title-default" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-default">Upload avatar</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>

            <form id="update-avatar-form" enctype="multipart/form-data">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="user-avatar-upload">Avatar</label>
                        <button type="button" id="user-avatar-upload-btn" class="btn btn-primary">Choose file</button>
                        <p id="uploaded-file-name" class="uploaded-file-name"></p>
                        <input type="file" id="user-avatar-upload" class="btn btn-primary d-none" name="avatar" accept="image/*">
                        <input type="hidden" id="user-id" name="user-id" value="{{user._id}}">
                    </div>    
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Upload</button>
                    <button type="button" class="btn btn-link ml-auto" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

{{!-- add question --}}
<div class="modal fade" id="add-question-modal" tabindex="-1" role="dialog" aria-labelledby="modal-title-add-question" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-add-question">Post question</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>

            <form id="add-question-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="add-question-form-title">Title</label>
                        <input type="text" id="add-question-form-title" class="form-control" placeholder="title" name="title">
                    </div>
                    <div class="form-group">
                        <label for="add-question-form-pet">Pet Type</label>
                        <select id="add-question-form-pet" class="custom-select form-control" name="pet">
                            {{#each user.petType}}
                            <option value="{{this}}">{{this}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Question Type</label>
                        <div class="radio-group row-fluid text-center">
                            <div class="col-4 p-0">
                                <input class="radio" type="radio" id="add-question-form-type-help" name="qtype" value="Help" checked>
                                <label for="add-question-form-type-help">Help</label>
                            </div>
                            <div class="col-4 p-0">
                                <input class="radio" type="radio" id="add-question-form-type-question" name="qtype" value="Question">
                                <label for="add-question-form-type-question">Question</label>
                            </div>
                            <div class="col-4 p-0">
                                <input class="radio" type="radio" id="add-question-form-type-other" name="qtype" value="Other">
                                <label for="add-question-form-type-other">Other</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="add-question-form-description">Description</label>
                        <textarea class="form-control add-question-form-description" name="description" id="add-question-form-description" rows="6" maxlength="160" placeholder="Write your description here ..."></textarea>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Create</button>
                    <button type="button" class="btn btn-link ml-auto" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="change-zip-modal" tabindex="-1" role="dialog" aria-labelledby="modal-title-change-zip" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-change-zip">Change zipcode</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <form id="change-zip-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="change-zip-form-new-zip">New zipcode</label>
                        <input type="zip" id="change-zip-form-new-zip" class="form-control" placeholder="New ZipCode" name="new-zip">
                    </div>
                </div>
                <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Change zipcode</button>
                        <button type="button" class="btn btn-link ml-auto" data-dismiss="modal">Close</button>
                </div>
            </form>
         </div>
    </div>
</div>

{{!-- change password --}}
<div class="modal fade" id="change-password-modal" tabindex="-1" role="dialog" aria-labelledby="modal-title-change-password" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-change-password">Change password</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>

            <form id="change-password-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="change-password-form-old-password">Old passowrd</label>
                        <input type="password" id="change-password-form-old-password" class="form-control" placeholder="old password" name="old-password">
                    </div>
                    <div class="form-group">
                        <label for="change-password-form-new-password">New password</label>
                        <input type="password" id="change-password-form-new-password" class="form-control" placeholder="new password" name="new-passowrd" data-toggle="tooltip" data-placement="top" title="length must be greatter than or equal to 8">
                    </div>
                    <div class="form-group">
                        <label for="change-password-form-confirm-new-password">Confirm new password</label>
                        <input type="password" id="change-password-form-confirm-new-password" class="form-control" placeholder="new password" name="confirm-new-passowrd" data-toggle="tooltip" data-placement="top" title="must be same as the password you inputted">
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Change</button>
                    <button type="button" class="btn btn-link ml-auto" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<section class="my-5">
    <div class="container">
        <h1>Your post</h1>
        <p {{#if user.questions}}style="display: none"{{/if}} id="no-data-found-alert-question" class="no-data-found-alert">No questions found. You can add your questions.</p>
        <div id="questions-container" class="row questions-container">
            {{#each user.questions}}
            <div class="col-lg-3 col-md-4 col-6 mb-4 question-container">
                <button type="button" class="btn btn-danger btn-sm btn-round btn-shadow btn-delete-question position-absolute">delete</button>
                <div class="card">
                    <a href="/question/{{_id}}" >
                        <div class="avatar-container">
                            {{#if avatar}}
                            <img src="{{ avatar }}" class="card-img-top" alt="question avatar">
                            {{else}}
                            <img src="/public/img/avatar/default-question.png" class="card-img-top" alt="question avatar">
                            {{/if}}
                        </div>
                        <div class="card-body">
                            <h2 class="card-title display-4 mb-0">{{title}}</h2>
                            <p class="card-text"><span class="card-text-pet">{{type}}: </span>{{pet}}</p>
                        </div>
                    </a>
                </div>
            </div>    
            {{/each}} 
        </div>
    </div>   
</section>

{{#section 'script'}}
<script src="/public/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="/public/js/pages/user_owner.js"></script>
{{#if error}}
<script>
error("{{error}}");
</script>
{{/if}}
{{/section}}